# BankingApp
This API includes all of the necessary Entities to conform a functionting banking application/system. Including it's users, currencies and accounts.

Inside of this API there's the following types of users; Admins, AccountHolders and Third Parties.

All Users have;
- A unique username, which is used to log on, and it's the unique identifier to differentiate them.
A password. Which they will use to protect their account and so others can't access their account.


<h2>Admin</h2>

All admins have the ability to delete accounts, modify values in the DB, and overall manage most of the inner works of the application.
They only have the parameters of the abstract class User.


<h2>Third Parties</h2>

Third parties are *external* users that are not part of our bank, but that are able to perform transactions within the API.

Third parties have a SecretKey on top of the basic User information to identify them as outside entities inside of the system.


<h2>Account Holders</h2>

Account holders are members within the banking institution, and are able to have one or more account within it, aswell as do transactions, gain interest, etc.
They have the following parameters on top of the one's of a basic User;
- A date of birth, used for things such as birthdays, to check if they are valid for student benefits, etc.
- An address, that includes the direction, postal code, city and country.
- They might have an additional (optional) address.
- A list of the accounts of which they are owners.
- And a list of the accounts they are secondary owners of.

They are only able to access the accounts and options within the API that are part of the accounts they own.


<h1>Accounts</h1>


There's different types of Accounts, all of which share the parameters of the Abstract Account class, which has;
- An autogenerated ID to be sorted and found within the DB.
- A Money class, with a currency (in this case the bank accepts EURO, dollars, and CAD.
- A secretKey, personal identifier of their account. Sort of of like an IBAN. And used within transactions with an external banking system.
- A primary owner, that will be an Account Holder.
- Aswell as an optional SecondaryOwner, which may or may not be present.
- A penaltyFee, which is a flat 40€ regardless of the currency. That is applied when accounts drop below their minimum Balance (if present).

On top of all of the parameters above present in the parent class, there's the following classes, with the Following parameters.

<h2>Checking Accounts</h2>
- A mimimum Balance, which will apply the Penalty fee if the account's balance goes below that number. 
- A monthly maintenance fee, that's applied monthly and it's a flat 12€.
- A creation date, which will be used in the future for things such as seniority bonuses, and also to know the months/years passed since the creation of the account.
- A "Last Checked" date, which is used internally to check the last time the account was checked, and to do the necessary internal processes to determine if the monthly maintenance fee should be applied, or if the account should be given a payment on it's interest.
- And a Status, which can be either OPEN, if the account is functional, or FROZEN, if the account is being inspected for suspicious activity or fraud.

<h2>Student Checking Account</h2>
It functions the same as a Checking Account, except it does not have a minimumBalance, nor a monthlyMaintFee, and it's only for AccountOwners under 24.
Once an account is created, if the account holder is under 24, it will be created as a student checking account, and once they become 24, it automatically becomes a Checking Account.

<h2>Savings Account</h2>
- A mimimum Balance, which will apply the Penalty fee if the account's balance goes below that number. 
- A creation date, which will be used in the future for things such as seniority bonuses, and also to know the months/years passed since the creation of the account.
- A "Last Checked" date, which is used internally to check the last time the account was checked, and to do the necessary internal processes to determine if the monthly maintenance fee should be applied, or if the account should be given a payment on it's interest.
-An Interest Rate, which will determine at which rate they gain interest yearly.

<h2>Credit Card</h2>
-An Interest Rate, which will determine at which rate they gain interest yearly.
-A Credit Limit, which delimits how low the credit card can go below 0, before blocking payments. 

<h1>Internal Functions</h1>

GET route:
<h3>/tranfer/{id}</h3>
This method can be used by any AccountHolder, and it's used to transfer funds to another AccountHolder, in order to do so, they must provide the ID of the account via a @PathVariable, and provide the name (id) of the account holder to recieve it, and the amount to be transfered. 
A NOT_FOUND exception will be thrown if the username used for basic auth doesnt match any of the ones in the DB, aswell as if the ID doesn't match any of the Accounts from that Account Holder.
If the AccountHolder cannot be found, a NOT_FOUND HTTPStatus exception will be thrown, it will do so aswell if the account ID is not of the accountHolder introduced.
It will also throw a BAD_REQUEST HTTPStatus if the account doesn't have enough funds. 

POST route:
<h3>/create/{accountType}/{id}</h3>
This route can only be used by an Admin, and it has two PathVariables, the first is used to determine if the account being created will be credit, savings, or checking (or student, which will be created automatically if the owner of the account is under 24 years old.
If the first pathvariable is not valid, a BAD_REQUEST will be thrown, indicating that it's not a valid account type.
The admin will also need to provide a DTO with the information of the account itself, aswell as the id of the AccountHolder.
If the ID introduced doesn't match any of the accounts in the database, a NOT_FOUND HTTPStatus exception will be thrown.
An error will also be thrown if a @NotNull parameter is not filled properly in the JSON with the DTO information.


DELETE route:
<h3>/delete/account</h3>
This route can only be used by an Admin, and it simply requires the ID of an account in order to delete it.
If the ID is found, the Account will be deleted and cascade will prevent issues.
If the ID is not found in the DB, a NOT_FOUND exception will be thrown.


GET route:
<h3>/accounts/</h3>
This route is used by any account holder, and it's used to display all accounts under their user, regardless of if they are primary or secondary owners of it, and returns a list of said Accounts.
If the username introduced with the Basic Auth doesn't match any accountHolders in our systems a >NOT_FOUND HTTPStatus will be thrown.

GET route:
<h3>/account/{id}</h3>
This route can be used by any AccountHolder, but it will only display the account if the accountOwner of the Account found with findById matches the one using it's username and password to log-in.
If the username is valid and it's an AccountHolder registered in our DB, but the ID doesn't match any of the accounts in our systems, a NOT_FOUND HTTPStatus exception will be thrown.
If the username introduced doesn't match any of the accountholders in our systems, a NOT_FOUND HTTPStatus exception will be thrown.

PATCH route: 
<h3>/modifyBalance/{amount}</h3>
This route can only be used by Admins, and it's used to modify the balance of an existing account, regardless of what type.
It has a pathvariable with the amount to update the account with, and it has a RequestParam with the id of the Account.
If the ID introduced doesn't match any of the existing accounts in the DB. A NOT_FOUND HTTPStatus exception will be thrown.

PATCH route:
<h3>/FreezeAccount/</h3>
This route can only be used by Admins, It takes an ID of an account as RequestParam.
Can't be applied to CreditCard accounts. Which would throw a BAD_REQUEST HTTPStatus exception.
It will also throw a NOT_FOUND HTTPStatus exception if the account was not found with findById

POST route:
<h3>/newThirdParty/</h3>
This route can only be used by Admins, and it requires a Body with all the information necessary to create a new third party (username, password and SecretKey), it will notify that one of the parameters is not valid if it's null or doesn't match the verification parameters.

GET route:
<h3>/ThirdParty/send/</h3>
This method can only be used by Users with the ThirdParty ROLE, and it requires to introduce a Header with the third Party's SecretKey, the amount being sent, and the ID and secretKey of the account they are sending the money to.
Since the third party is not part of our bank, we assume they have enough balance, and all transations are done in EURO.
If the secretKey doesn't match with the one of the Account with the given IP, a  BAD_REQUEST HTTPStatus will be thrown.
If the ID provided doesn't match any of the ones in the Account DB, a NOT_FOUND HTTPStatus will be thrown.


<h2> USE case Diagram and CLASS Diagram</h2>

![image](https://user-images.githubusercontent.com/110464615/188334579-d3148a60-bafb-4385-b596-249ce810a05d.png)


<h3> Use Case </h3> 

![image](https://user-images.githubusercontent.com/110464615/188334850-a9f82ff7-44c6-46af-ba86-65e591e6e062.png)
